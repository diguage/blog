<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="485px" preserveAspectRatio="none" style="width:605px;height:485px;" version="1.1" viewBox="0 0 605 485" width="605px" zoomAndPan="magnify"><defs><filter height="300%" id="ffl4uyksi2muf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="260.5" y="17.4023">观察者模式</text><!--class Subject--><rect fill="#FEFECE" filter="url(#ffl4uyksi2muf)" height="60.9551" id="Subject" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="127.5" y="160.1992"/><ellipse cx="167.7" cy="176.1992" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M167.8133,171.5474 L166.6595,176.6191 L168.9754,176.6191 Z M166.3191,169.3062 L169.3157,169.3062 L172.6609,181.6992 L170.2122,181.6992 L169.4485,178.6362 L166.1697,178.6362 L165.4227,181.6992 L162.9739,181.6992 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="42" x="187.3" y="180.7344">Subject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="128.5" x2="256.5" y1="192.1992" y2="192.1992"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="135.5" y="201.1768"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="147.5" y="206.834">observer :Observer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="128.5" x2="256.5" y1="213.1543" y2="213.1543"/><path d="M6,29.1992 L6,100.4414 A0,0 0 0 0 6,100.4414 L146.2492,100.4414 L178.1118,159.9718 L154.2492,100.4414 L261,100.4414 A0,0 0 0 0 261,100.4414 L261,39.1992 L251,29.1992 L6,29.1992 A0,0 0 0 0 6,29.1992 " fill="#FBFB77" filter="url(#ffl4uyksi2muf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M251,29.1992 L251,39.1992 L261,39.1992 L251,29.1992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="12" y="46.7676">Subject 类，它把所有对观察者对象的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="12" y="62.0781">引用保存在一个聚集里，每个主题都可以</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="12" y="77.3887">有任何数量的观察者。抽象主题提供一个</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="12" y="92.6992">接口，可以增加和删除观察者对象。</text><!--class ConcreteSubject--><rect fill="#FEFECE" filter="url(#ffl4uyksi2muf)" height="48" id="ConcreteSubject" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="130" y="287.6992"/><ellipse cx="145" cy="303.6992" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M147.9731,309.3423 Q147.3921,309.6411 146.7529,309.7905 Q146.1138,309.9399 145.4082,309.9399 Q142.9014,309.9399 141.5815,308.2881 Q140.2617,306.6362 140.2617,303.5151 Q140.2617,300.3857 141.5815,298.7339 Q142.9014,297.082 145.4082,297.082 Q146.1138,297.082 146.7612,297.2314 Q147.4087,297.3809 147.9731,297.6797 L147.9731,300.4023 Q147.3423,299.8213 146.7488,299.5515 Q146.1553,299.2817 145.5244,299.2817 Q144.1797,299.2817 143.4949,300.3484 Q142.8101,301.415 142.8101,303.5151 Q142.8101,305.6069 143.4949,306.6736 Q144.1797,307.7402 145.5244,307.7402 Q146.1553,307.7402 146.7488,307.4705 Q147.3423,307.2007 147.9731,306.6196 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="159" y="308.2344">ConcreteSubject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="131" x2="254" y1="319.6992" y2="319.6992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="131" x2="254" y1="327.6992" y2="327.6992"/><path d="M27.5,402.1992 L27.5,473.4414 A0,0 0 0 0 27.5,473.4414 L245.5,473.4414 A0,0 0 0 0 245.5,473.4414 L245.5,412.1992 L235.5,402.1992 L156.3508,402.1992 L181.7026,335.9933 L148.3508,402.1992 L27.5,402.1992 A0,0 0 0 0 27.5,402.1992 " fill="#FBFB77" filter="url(#ffl4uyksi2muf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M235.5,402.1992 L235.5,412.1992 L245.5,412.1992 L235.5,402.1992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="33.5" y="419.7676">ConcreteSubject 类，具体主题，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="33.5" y="435.0781">将有关状态存入具体观察者对象；</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="33.5" y="450.3887">在具体主题的内部状态改变时，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="33.5" y="465.6992">给所有登记过的观察者发出通知。</text><!--class Observer--><rect fill="#FEFECE" filter="url(#ffl4uyksi2muf)" height="48" id="Observer" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="389" y="166.6992"/><ellipse cx="404" cy="182.6992" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M404.1133,178.0474 L402.9595,183.1191 L405.2754,183.1191 Z M402.6191,175.8062 L405.6157,175.8062 L408.9609,188.1992 L406.5122,188.1992 L405.7485,185.1362 L402.4697,185.1362 L401.7227,188.1992 L399.2739,188.1992 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="418" y="187.2344">Observer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="390" x2="473" y1="198.6992" y2="198.6992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="390" x2="473" y1="206.6992" y2="206.6992"/><path d="M341.5,36.6992 L341.5,92.6309 A0,0 0 0 0 341.5,92.6309 L451.543,92.6309 L437.4932,166.3398 L459.543,92.6309 L583.5,92.6309 A0,0 0 0 0 583.5,92.6309 L583.5,46.6992 L573.5,36.6992 L341.5,36.6992 A0,0 0 0 0 341.5,36.6992 " fill="#FBFB77" filter="url(#ffl4uyksi2muf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M573.5,36.6992 L573.5,46.6992 L583.5,46.6992 L573.5,36.6992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="347.5" y="54.2676">Observer类，抽象观察者，为所有的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="347.5" y="69.5781">具体观察者定义一个接口，在得到主题</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="347.5" y="84.8887">的通知时更新自己。</text><!--class ConcreteObserver--><rect fill="#FEFECE" filter="url(#ffl4uyksi2muf)" height="60.9551" id="ConcreteObserver" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="363.5" y="281.1992"/><ellipse cx="378.5" cy="297.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M381.4731,302.8423 Q380.8921,303.1411 380.2529,303.2905 Q379.6138,303.4399 378.9082,303.4399 Q376.4014,303.4399 375.0815,301.7881 Q373.7617,300.1362 373.7617,297.0151 Q373.7617,293.8857 375.0815,292.2339 Q376.4014,290.582 378.9082,290.582 Q379.6138,290.582 380.2612,290.7314 Q380.9087,290.8809 381.4731,291.1797 L381.4731,293.9023 Q380.8423,293.3213 380.2488,293.0515 Q379.6553,292.7817 379.0244,292.7817 Q377.6797,292.7817 376.9949,293.8484 Q376.3101,294.915 376.3101,297.0151 Q376.3101,299.1069 376.9949,300.1736 Q377.6797,301.2402 379.0244,301.2402 Q379.6553,301.2402 380.2488,300.9705 Q380.8423,300.7007 381.4731,300.1196 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="104" x="392.5" y="301.7344">ConcreteObserver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="364.5" x2="498.5" y1="313.1992" y2="313.1992"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="371.5" y="322.1768"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="383.5" y="327.834">subject :Subject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="364.5" x2="498.5" y1="334.1543" y2="334.1543"/><path d="M326,409.6992 L326,465.6309 A0,0 0 0 0 326,465.6309 L593,465.6309 A0,0 0 0 0 593,465.6309 L593,419.6992 L583,409.6992 L457.2631,409.6992 L438.278,342.2003 L449.2631,409.6992 L326,409.6992 A0,0 0 0 0 326,409.6992 " fill="#FBFB77" filter="url(#ffl4uyksi2muf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M583,409.6992 L583,419.6992 L593,419.6992 L583,409.6992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="332" y="427.2676">ConcreteObserver 类，具体观察者，实现</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="332" y="442.5781">抽象观察者角色所要求的更新接口，以便</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="332" y="457.8887">使本身的状态与主题的状态相协调。</text><!--link Subject to Observer--><path d="M257.8516,190.6992 C299.7852,190.6992 341.7188,190.6992 383.6524,190.6992 " fill="none" id="Subject-Observer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="388.7662,190.6992,379.7662,186.6992,383.7662,190.6992,379.7662,194.6992,388.7662,190.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="265.5296" y="187.6841">-observer</text><!--link Observer to ConcreteObserver--><path d="M431.5,235.0763 C431.5,250.3691 431.5,267.1445 431.5,281.0901 " fill="none" id="Observer-ConcreteObserver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="424.5001,234.8946,431.5,214.8945,438.5001,234.8945,424.5001,234.8946" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Subject to ConcreteSubject--><path d="M192.5,241.3779 C192.5,257.4157 192.5,274.3995 192.5,287.6579 " fill="none" id="Subject-ConcreteSubject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="185.5001,241.2326,192.5,221.2326,199.5001,241.2326,185.5001,241.2326" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ConcreteSubject to ConcreteObserver--><path d="M260.1233,311.6992 C294.5034,311.6992 328.8836,311.6992 363.2638,311.6992 " fill="none" id="ConcreteSubject-ConcreteObserver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="255.0508,311.6992,264.0508,315.6992,260.0508,311.6992,264.0508,307.6992,255.0508,311.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="301.3771" y="308.6612">-subject</text><!--
@startuml
skinparam nodesep 80

title <b>观察者模式</b>

abstract class Subject {
  - observer :Observer
}
note top: Subject 类，它把所有对观察者对象的\n引用保存在一个聚集里，每个主题都可以\n有任何数量的观察者。抽象主题提供一个\n接口，可以增加和删除观察者对象。

class ConcreteSubject {
}
note bottom: ConcreteSubject 类，具体主题，\n将有关状态存入具体观察者对象；\n在具体主题的内部状态改变时，\n给所有登记过的观察者发出通知。

abstract class Observer {
}
note top: Observer类，抽象观察者，为所有的\n具体观察者定义一个接口，在得到主题\n的通知时更新自己。

class ConcreteObserver {
  - subject :Subject
}
note bottom: ConcreteObserver 类，具体观察者，实现\n抽象观察者角色所要求的更新接口，以便\n使本身的状态与主题的状态相协调。

Subject "-observer" -right-> Observer

Observer <|- - ConcreteObserver
Subject  <|- - ConcreteSubject

ConcreteSubject  <-left- "-subject" ConcreteObserver

@enduml

PlantUML version 1.2018.01(Mon Jan 29 02:08:22 CST 2018)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_161-b12
Operating System: Mac OS X
OS Version: 10.13.3
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>